# 診察文字起こし分析ツール (Transcript Analyzer)

診察外来やカウンセリングの文字起こしデータ（逐語録）を、Google Gemini API を活用して迅速かつ客観的に分析するためのツールです。臨床現場での振り返りや、記録作成の補助を目的としています。

## 🚀 主な機能

- **特定パターンの自動抽出**:
    - **会話ラリー**: 医師と患者の間で、短い発話が5往復（計10ターン）以上続く活発なやり取り箇所を特定します。
    - **患者の長い発話（モノローグ）**: 患者が実質的に連続して長く（目安として150文字以上、または5文以上）話し続けている箇所を特定します。
- **2つの分析結果を並列表示**: 
    - 一度の実行で2つの分析処理を並列で行い、結果を左右に並べて表示します。AIによる分析の揺らぎを確認したり、異なる観点からの要約を比較したりできます。
- **柔軟なモデル選択**:
    - 用途に合わせて `gemini-3-flash-preview`（高速・低コスト）と `gemini-3-pro-preview`（高精度）を選択可能です。
- **柔軟なデータ対応**:
    - 受付番号が含まれていないトランスクリプト（患者名のみなど）でも、会話パターンを基に分析を行います。
- **多様なファイル形式に対応**:
    - `.txt`, `.docx` (Word), `.md`, `.csv`, `.log` ファイルを直接読み込めます。
- **データの利活用**:
    - 分析結果を CSV 形式で保存。
    - スプレッドシートや Excel に直接貼り付け可能な形式でクリップボードにコピー。

## 🛠️ 技術構成

- **フロントエンド**: HTML5, Tailwind CSS, JavaScript (Vanilla JS)
- **AIエンジン**: Google Gemini API (`gemini-3-flash-preview` / `gemini-3-pro-preview`)
- **インフラ**: Google Cloud Run (Docker + Nginx)
- **CI/CD**: GitHub + Google Cloud Build

## 📖 使い方

1. **APIキーの設定**:
   - 右上の「設定」ボタンから、ご自身の Google Gemini API Key を入力して保存してください。
2. **ファイルの読み込み**:
   - 「ファイルを選択」ボタンから、文字起こしデータを選択します。
3. **分析開始**:
   - 「分析開始 (2回並列)」ボタンをクリックします。
4. **結果の確認・出力**:
   - 左右のカラムに表示された結果を確認し、必要に応じて「CSV保存」や「コピー」を行ってください。

## 🔒 セキュリティとプライバシー

- 入力された API Key はブラウザの `localStorage` にのみ保存され、開発者サーバーや第三者に送信されることはありません。
- 文字起こしデータは、ブラウザから Google Gemini API に直接送信され、分析に使用されます。

## 📄 ライセンス

このプロジェクトは医療現場での活用を支援するために開発されました。

---
*本ツールは分析を補助するものであり、医学的診断や評価を代替するものではありません。*
